# Chapter 10—结构体和方法
Go 以别名类型或结构体的形式支持用户定义或自定义类型。结构体是复合类型，用于定义由许多属性组成的类型，每个属性都有自己的类型和值，将数据组合在一起。然后可以像访问单个实体一样访问这些数据。 它们也是值类型，所以用 `new` 构建。构成结构体类型的组件数据片段称为字段(fields), 一个字段有一个类型和一个名字; 结构体中的字段名称必须是唯一的。

## 10.1.结构体的定义
通常定义结构体的一般形式如下：
```go
type identifier struct {
    field1 type1
    field2 type2
    …
}
```
如果结构体中的某个字段从不被使用，可以被命名为 `_`。

**使用 new**

使用 `new` 来申请一个结构体变量的内存，返回指向被申请存储空间的指针。
```go
var t *T = new(T)

// 或者不在同一行
var t *T
t = new(T)

// 习惯写法
t := new(T)
```
此时结构体内的字段的值为对应类型的零值。

一个简单的例子:
```go
package main

import "fmt"

type struct1 struct {
	i1  int
	f1  float32
	str string
}

func main() {
	ms := new(struct1)
	// var ms struct1
	ms.i1 = 10
	ms.f1 = 15.5
	ms.str = "Chris"
	fmt.Printf("The int is: %d\n", ms.i1)
	fmt.Printf("The float is: %f\n", ms.f1)
	fmt.Printf("The string is: %s\n", ms.str)
	fmt.Println(ms)
}
// The int is: 10
// The float is: 15.500000
// The string is: Chris
// &{10 15.5 Chris}
```
通过 `structname.fieldname = value` 来对结构体内的字段进行访问。结构体变量和指针的访问方式相同
```go
type myStruct struct { i int }
var v myStruct
var p *myStruct
v.i
p.i
```
**结构体文字**
```go
ms := &struct1{10, 15.5, "Chris"}

var mt struct1
mt = struct1{10, 15.5, "Chris"}
```
`new(Type)` 和 `&Type{}` 是等价的表达式

三种初始化的方式：
```go
type Interval struct {
    start int
    end int
}

inter := Interval{0,3}
inter2 := Interval{end:5, start:1}
inter3 := Interval{end:5}
```
> 结构体中的字段遵循 `首字母大写则对外可见` 的原则。

下面展示 结构体在内存中布局：
![结构体在内存中布局](https://raw.githubusercontent.com/shijie93/the_way_to_go/master/chapter-10/struct_in_memory.png)

结构体嵌套的内存布局：
```go
type Rect1 struct { Min, Max Point }
type Rect2 struct { Min, Max *Point }
```
![结构体嵌套的内存布局](https://raw.githubusercontent.com/shijie93/the_way_to_go/master/chapter-10/struct_in_struct.png)

## 10.2.用 Factory 方法创建一个结构体变量

### 10.2.1.结构体工厂
Go不像OO语言那样支持构造函数，但类似于构造函数的工厂函数很容易实现。