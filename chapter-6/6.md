# Chapter 6—函数
## 6.1.介绍
函数在源码中的顺序不会影响编译，但是为了更好的可读性，推荐以 `main()` 开头，其他函数按逻辑顺序编写。

GO 有三种函数：

1. 带标识符(函数名)的函数
2. 匿名函数或者 lambda 函数
3. 方法

其中任何一个都可以有参数和返回值。 所有函数参数和返回值的定义及其类型称为函数 `signature`。

再次强调一下 Go 中大括号的写法:
```go
func g(){

}
```
在包中定义的函数调用时需要附带包名:
```go
pack1.Function(arg1,arg2, . . . ,argn) // Function F 大写
```
下面展示一个简单的例子:
```go
package main

import (
	"fmt"
)

func main() {
	greeting()

}

func greeting() {
	fmt.Println("Hello world!\n")
}
```
函数可以传递函数参数，假设 f1 需要传递三个整型的参数( `f1(a,b,c int)` )，f2 返回三个整型的返回值( `f2(a,b int)(int int int)` )，那么可以进行如下的调用方式:
```go
f2(f1(a,b))
```
> 函数重载在 `GO` 中是不被允许的，它会带来编译器错误: `funcName redeclared in this block, previous declaration at lineno`。主要原因是重载函数迫使运行时执行额外的类型匹配，这会降低性能; 没有超载意味着只需要一个简单的函数调度( 后面会提到，可以使用接口 )。

为了声明一个在Go之外实现的函数，比如汇编程序，你只需要提供名字和签名：
```go
func flushICache(begin, end uintptr) // 外部实现
```
函数也可以以声明的形式用作函数类型，如下所示：
```go
type binOp func(int, int) int
```
Go 没有 `泛型` 的概念，但是可以使用接口来解决这个问题。

## 6.2.参数和返回值
参数即调用者传递到函数中的数据，而返回值即为函数运行结束后传递给调用者的一个或一组(这对于C/C++等语言，是一个很大的提升)数据。每个返回至少1个值的函数必须以 `return` 或 `panic` 结束。如果确定函数需要返回一个(组)值，那么函数必须满足每一个代码路径都拥有 `return` 。
```go
func (st *Stack) Pop() int {
	v := 0
	for ix := len(st) - 1; ix >= 0; ix-- {
		if v = st[ix]; v != 0 {
			st[ix] = 0
			return v
		}
    }
    // return xxx
}
```
上例的函数编译无法通过，因为不是每个代码路径都有返回。

函数定义参数也可以不带名称，只显示类型:
```go
func f(int, int, float64)
```
### 6.2.1.用值或者用引用调用
函数的默认调用方式是传递一个 `值` 作为参数：是对应数据的拷贝。因为时拷贝，在函数中对它进行的修改，不会反馈到函数外(函数外的变量值不变)。

当然，如果你想要在函数中修改外部传递的变量，我们就需要在外部传递变量在内存中存放的地址(`&a`)，即变量的引用，将一个指针传递给该函数。如果传递的变量是一个指针，则该指针值被复制，而不是它指向的数据; 但通过指针该函数能够更改变量的原始值(解引用)。
> 传递指针（32位或64位值）几乎在所有情况下比制作对象的副本更低耗(对内存的占用等)。

诸如 `slices`，`maps`，`interfaces`和 `channels`之类的引用类型默认通过引用传递。

一些函数只执行一项任务，`没有返回值` ，如打印到控制台，发送邮件，记录错误。

如果必须要函数返回值4或者更多的值，最好传递一个 `slice` 或者指针指向结构体。`传递指针是一个低开销并且能够改变原始数据的方法`。

### 6.2.2.返回值变量命名
未命名的返回值变量使用如下:
```go
func getX2AndX3(input int) (int, int) {
	return 2 * input, 3 * input
}
```
如果 `return` 带空参数，那么隐式返回与返回值变量名称相同的变量：
```go
func getX2AndX3_2(input int) (x2 int, x3 int) {
	x2 = 2 * input
	x3 = 3 * input
	// return x2, x3
	return
}
```
> 当然，这是不建议的！！

## 6.3.传递可变数量的参数
